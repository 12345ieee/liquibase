language: java
jdk: openjdk8
install: cp ./.travis/maven.settings.xml $HOME/.m2/settings.xml
env:
  global:
    - secure: BR9Nu8Kt5knJnDHf01/AwaSauNsfcEYoP/nWdQc/LRFDeNUUI7HD3fzwoe0clR6q9mKHL1/l5kiLrz/+3dbKuMC9DbA7R04AeH+kYI/T9kVerW1KJTNNQUaCv0IZtMV7XDuqNKNQjtDQxsp34iHefRl3be0g5RKsf6KxoyFJ+418gU0B2B9A2+1ZANzIGePSbBz2ncW2Zj6ub7As664gGTtywIl8FE9kHMNrLobhFc2MuW1idur/Vqn50r1xGYgQUPV9rGLVI40yEfrST+FP7hsCSRIbUjmRyHZCjoFdJO3BTpjl2wBbytAPxoIWIxMBFtnGklBSuyMyyDpPYTPmKyDMOV4CNMUd/WcL8i04NV9qDXLEGDLyaD94CCxHqOVznGVmfHdvDsOMP0mbHzPRUfj9yTELbadUDZtglJ2MJ+9RqKbGR0/uSjG70f3ayY5WsUPBBP502UoxjJrCPRLVBvjja1t0GNB/zGtFXw36a0XCbR5iu5LoHDdgUSIIufVjc8qy38G1HWiEZAmKeYqGpfqeKiOs01ASLbTcvWvBNGrijRowqGNwuV0ldxqxuPWVWhzf5WCOQ52dp7vTX7jf4wBKZJxwEYsiyV6iZ6nk61SXFOyQ5eBesMTTWfIaH15Y2yoMvp2WBYf9PPqJPgPCEBVxVjAP4Ms+U+CDAae35KI=

script: mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent deploy sonar:sonar -Dsonar.projectKey=liquibase_liquibase -Ddeploy.url=https://maven.pkg.github.com/liquibase -Ddeploy.repositoryId=github
cache:
  directories:
  - "~/.m2"
addons:
  sonarcloud:
    organization: "liquibase-oss"
    token:
      secure: LnotzNSdNvo46OiOwqCpuvG48auUnwdn78T6c2RXk39k9gtK/yBLrrSbnuBqShbYn4llXxHSLkvalfBa8Ck5w6BpMOoTInpsOWverK+0PyVmgJUv9wNIAV/9+CJS7QsBivLUf6STT7ABfbcoUiWSZUJnOS5zIZukySk+/lmMnRW2h5GniRw3N0MFPtu4G+IZ1jqWhlHovjq41JWHEGCs1+jKQPmajQLOu4RKtihEfBAVXBIorjJIXl9TcPQAbTltYPe4oRSLMRQ/Qj3PMpgsSMLRKmzJ/sgzmgzPSdlTDcsnLOjnnp6f/5mt7arZx/k78xJ+CVezr+QIIU4tpaWZqPC7T7mRh9nixQnXhNpg91zibMTb8XUIdJ8fpMlqPeHHUcKzYJ6074e0BM9JEqXSW9hvWtuscoN1nNJFyGocqaeuZ7/sUxa6zEVNRaUZ3kWoZbttkQ5AKAuYS/oVnWmkMGx5AhNqVCynGv78jIyxHSR3n4gla66+lWZqKVb1ySt8qpeHE9Ep8O0Z9EouykTCYDKJiPvwbYns5auAJdqUCuQadGh0wRBJccEDlC0LcPVilQiCrEpMOCNLmYmjVbwKm6ZFMnHfS/xB7TjgSA0CmbkX0lsDIWypwkm+TkHVg6Uw6fEpgNMOBd8W6b7XMGEUfqZcbYfPvJVSN0aeUKoYPN8=
after_success:
  - bash <(curl -s https://codecov.io/bash)
