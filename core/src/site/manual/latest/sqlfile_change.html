<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <title>LiquiBase: SQL File</title>
        <style type='text/css' media='screen'>@import "../../include/css/main.css";</style>
    </head>
    <body>@ANALYTICS@
        <img src="../../images/liquibase_logo.gif" alt="LiquiBase" class="topLogo"/>
        <p id="sitename">
            <strong>LiquiBase: Database Refactoring</strong>
        </p>

        <div id="container">
                @NAV.MANUAL@


            <div id="content">
                <div class="entry">
                    <h2>"SQL File" Refactoring</h2>
                    <p>
                        The "sqlfile" tag allows you to specify any sql statements and have it stored external in a file.
                        It is useful for complex changes that are not supported through LiquiBase's automated refactoring tags such as stored procedures. 
                    </p>
                    <p> The sqlfile refactoring finds the file by searching in the following order:
                         <ol>
                              <li>The file is searched for in the classpath. This can be manually set and by default the liquibase startup script adds the current directory when run.</li>
                              <li>The file is searched for using the file attribute as a file name. This allows absolute paths to be used or relative paths to the working directory to be used.</li>
                         </ol>
                    </p>
                    <p>The "sqlfile" tag can also support multiline statements in the same file. Statements can either be split using a ; 
                           at the end of the last line of the SQL or a go on its own on the line between the statements can be used.Multiline SQL 
                           statements are also supported and only a ; or go statement will finsih a statement, a new line is not enough. Files containing 
                           a single statement do not need to use a ; or go.

                    </p>
                    <p>The sql file can also contain comments of either of the following formats:<br/>
                       <ol>
                           <li>A multiline comment that starts with /* and ends with */.
                           <li>A single line comment starting with &lt;space&gt;--&lt;space&gt and finishing at the end of the line
                       </ol>
                    </p>

                    <h3>Sample</h3>
                    <pre>&lt;sqlfile path="sample.sql"/&gt

where sample.sql can contain:
insert into person (id, name) values (1, 'Bob')

A multiline sample.sql might look like:
insert into person (id,name) values (1, 'George');
insert into person (id,name) values (2, 'Jim')

For MSSQL you could also use go  for multiline support and 
have statements split across many lines:
insert into person (id,name) 
values (1, 'George')
go
insert into person (id,name) 
values (2, 'Jim')
                    </pre>
                    <h3>Available Attributes</h3>
                    <table class="attributesTable">
                        <tr><th>path</th><td>The name of the SQL file to load</td></tr>
                         <tr><th>stripComments</th><td>Set to <i>true</i> to remove any comments in the SQL before executing, otherwise false. Defaults to false if not set</td></tr>
                         <tr><th>splitStatements</th><td>Set to <i>false</i> to not have liquibase split statements on ;'s and GO's.  Defaults to true if not set</td></tr>
                    </table>

                    <h3>Database Compatiblity</h3>
                    <table class="databaseCompatibiltyTable">
                        <tr><th>MySQL</th><td>No Issues</td></tr>
                        <tr><th>PostgreSQL</th><td>No Issues</td></tr>
                        <tr><th>Oracle</th><td>No Issues</td></tr>
                        <tr><th>MS-SQL</th><td>No Issues</td></tr>
                        <tr><th>Sybase</th><td>Sybase might require stripComments to be set to true for multiline sql</td></tr>
                        <tr><th>DB2</th><td>No Issues</td></tr>
                        <tr><th>HSQL</th><td>No Issues</td></tr>                                                
                        <tr><th>Derby</th><td>No Issues</td></tr>
                        <tr><th>H2</th><td>No Issues</td></tr>
                        <tr><th>Cach&eacute;</th><td>No Issues</td></tr>
                        <tr><th>Firebird</th><td>No Issues</td></tr>
                    </table>

                    <h3>Automatic Rollback Support: <strong>NO</strong></h3>

                </div>
            </div>
        </div>

    </body>
</html>