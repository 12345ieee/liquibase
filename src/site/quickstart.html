<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <title>LiquiBase: Quick-Start</title>
        <style type='text/css' media='screen'>@import "include/css/main.css";</style>
    </head>
    <body>
        <img src="images/liquibase_logo.gif" alt="LiquiBase" class="topLogo"/>
        
        <p id="sitename">
            <strong>LiquiBase: Database Refactoring</strong>
        </p>

        <div id="container">
            <div id="navigation">
                @NAV.MAIN@
            </div>


            <div id="content">
                <div class="entry">
                    <h2>LiquiBase Quick-Start</h2>
                    <h4 style="margin-top: 20px;">Step 1: Create a Changelog File:</h4>
                    <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.0
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.0.xsd"&gt;

&lt;/databaseChangeLog&gt;
                    </pre>
                    <p>
                        The database changelog file is what stores all the database changes.
                        It is XML based, so start with an empty XML file:
                    </p>

                    <h4 style="margin-top: 20px;">Step 2: Add a ChangeSet</h4>
                    <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.0
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.0.xsd"&gt;

    &lt;changeSet id="1" author="bob"&gt;
        &lt;createTable tableName="department"&gt;
            &lt;column name="id" type="int"&gt;
                &lt;constraints primaryKey="true" nullable="false"/&gt;
            &lt;/column&gt;
            &lt;column name="name" type="varchar(50)"&gt;
                &lt;constraints nullable="false"/&gt;
            &lt;/column&gt;
            &lt;column name="active" type="boolean" defaultValue="1"/&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;

&lt;/databaseChangeLog&gt;
                    </pre>
                    <p>
                        Each ChangeSet is uniquely identified by an "id" attribute and an "author" attribute.  These two
                        tags, along with the name and package of the changelog file uniquely identify the change.
                        If only an "id" needed to be specified, it would be too easy accidentally duplicate them, especially
                        when dealing with multiple developers and code branches.  Including an "author" attribute minimizes
                        the chances of duplications.  If you are still worried about duplicates, you can use any string
                        you like for the "id", it does not have to be a sequential number.
                    </p>
                    <p>
                        Think of each ChangeSet is an atomic change you want to apply to your database.
                        It's usually best to include just one change in your ChangeSet, but more are allowed if you
                        want to insert multiple rows and have them all roll back if one of them fails for some reason.
                        LiquiBase will attempt to run each ChangeSet as a transaction, but many databases will silently
                        commit and resume transactions for certain commands (create table, drop table, etc.)
                    </p>
                    <h4 style="margin-top: 20px;">Step 3: Run the ChangeSet</h4>
                    <pre>
java -jar liquibase.migrator.jar -driver com.mysql.jdbc.Driver \
     -classpath /path/to/classes:mysql.jar \
     -execute \
     -migrationFile com/example/db.changelog.xml \
     -url "jdbc:mysql://localhost/example" \
     -username user \
     -password asdf
                    </pre>
                    <p>
                        You will see that your database now contains a table called "department".
                        Two other tables are created as well: "databasechangelog" and "databasechangeloglock".  The
                        databasechangelog table contains a list of all the statements that have been ran against the database.
                        The databasechangeloglock table is used to make sure two machines don't attempt to migrate the database
                        at the same time.
                    </p>

                    <h4 style="margin-top: 20px;">Next Steps</h4>
                    <p>
                       This quick-start guide is designed to get you started with LiquiBase.  For a full description of
                       all its capabilities, as well as other ways to execute the migrator, see the <a href="manual/index.html">LiquiBase Manual</a>
                    </p>
                </div>
            </div>
        </div>


    </body>
</html>